/**
 * @package     Bluecoder.JFilters
 *
 * @copyright   Copyright Â© 2024 Blue-Coder.com. All rights reserved.
 * @license     GNU General Public License 2 or later, see COPYING.txt for license details.
 */
document.addEventListener("DOMContentLoaded",(function(){let e=0;const t=document.querySelector('joomla-field-subform[name="jform[params][sorting_rules]"]');t&&t.addEventListener("subform-row-add",(t=>{const o=t.detail.row,a=o.querySelector(".joomla-modal"),r=a.id+"-"+e++;a.id=r;const n=o.querySelector("button[data-bs-toggle]");if(n&&n.setAttribute("data-bs-target","#"+r),a){const e={backdrop:!0,keyboard:!0,focus:!0};Joomla.initialiseModal(a,e)}}));document.getElementById("jform_params_contextType").addEventListener("change",(()=>{a(),o(),document.querySelectorAll(".jfilters_filters_selected").forEach((e=>{e.value=""}))}));function o(e=document){const t=document.getElementById("jform_params_contextType");if(t){let o=e.querySelector(".joomla-modal"),a=o.dataset.iframe,r=a.match(/src="([^"]+)"/);if(r&&r[1]){let e=new URL(r[1]);e.searchParams.set("filter[context]",t.value);const n=e.toString();let l=a.replace(r[1],n);o.setAttribute("data-iframe",l)}}}function a(e=document){let t=e.querySelector(".joomla-modal"),o=t.dataset.iframe,a=o.match(/src="([^"]+)"/);if(a&&a[1]){let e=new URL(decodeURIComponent(a[1])),r=["option","view","layout","tmpl","JFClient","filter[context]"];Array.from(e.searchParams.keys()).forEach((function(t){r.includes(t)||e.searchParams.delete(t)}));const n=e.toString();let l=o.replace(a[1],n);t.setAttribute("data-iframe",l)}}document.querySelectorAll(".jfiltersClearBtn").forEach((e=>{e.addEventListener("click",(e=>{a(e.target.closest(".controls"))}))})),o()}));
