/**
 * @package     Bluecoder.JFilters
 *
 * @copyright   Copyright Â© 2023 Blue-Coder.com. All rights reserved.
 * @license     GNU General Public License 2 or later, see COPYING.txt for license details.
 */
((e,t)=>{window.JFilters=window.JFilters||{},window.parent.applyFilters=function(e){"function"==typeof JFilters.setUrlFromSelected&&JFilters.setUrlFromSelected(e)},JFilters.addSelectedToInput=(e,t)=>{t&&e&&(t.value=e)},JFilters.addSelectedToEditor=(o,l)=>{if(!e.getOptions("xtd-menus"))throw window.parent.Joomla.Modal.getCurrent().close(),new Error("core.js was not properly initialised");const r=t.getElementById("jf_base_url").value,i=e.getOptions("xtd-menus").editor;if(o=r+"&amp;"+o,window.parent.Joomla.editors.instances[i].getSelection())window.parent.Joomla.editors.instances[i].replaceSelection(`<a href="${o}">${window.parent.Joomla.editors.instances[i].getSelection()}</a>`);else if(l||(l=prompt(e.Text._("COM_JFILTERS_SET_ANCHOR_TEXT"))),l){const e=`<a href="${o}">${l}</a>`;window.parent.Joomla.editors.instances[i].replaceSelection(e)}},JFilters.setUrlFromSelected=e=>{const o=[].slice.call(t.querySelectorAll(".filter__options-select"));let l="",r="";o.forEach((e=>{const t=e.selectedOptions,o=[];for(const e of t)l+=e.value,o.push(e.text);r||1!=o.length||(r=o[0])}));let i=!!t.querySelector("#additional_Itemid")&&t.querySelector("#additional_Itemid").value;if(l)if(i&&(l+="&amp;Itemid="+i),r=r.replace(/^[- ]+/,""),r=r.replace(/\s\(\d+\){1}$/,""),e&&"editor"!=e){console.log(window.parent.Joomla.Modal.getCurrent());const e=window.parent.Joomla.Modal.getCurrent().previousSibling.querySelector(".jfilters_filters_selected");JFilters.addSelectedToInput(l,e)}else JFilters.addSelectedToEditor(l,r);window.parent.Joomla&&window.parent.Joomla.Modal&&window.parent.Joomla.Modal.getCurrent().close()}})(Joomla,document);
